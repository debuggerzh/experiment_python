# 😅 变量及其类型

变量在使用前必须先"定义"。要注意变量名的命名规则。

如果改变变量的数据类型，将重新分配内存空间。

像Python这种变量本身类型不固定的语言称之为_动态语言_，与之对应的是_静态语言_。

在交互模式中，最后被输出的表达式结果被赋值给变量 **\_** 。

可以通过使用`del`语句删除单个或多个对象的引用，例如

```python
del var_a, var_b
```

## 变量作用域

所谓作用域（Scope），就是变量的有效范围，即变量可以在哪个范围以内使用。有些变量可以在整段代码的任意位置使用，有些变量只能在函数内部使用，有些变量只能在 for 循环内部使用。

### 局部变量

在函数内部定义的变量，它的作用域也仅限于函数内部，出了函数就不能使用了，我们将这样的变量称为局部变量（Local Variable）。

要知道，当函数被执行时，Python 会为其分配一块临时的存储空间，所有在函数内部定义的变量，都会存储在这块空间中。而在函数执行完毕后，这块临时存储空间随即会被释放并回收，该空间中存储的变量自然也就无法再被使用。

值得一提的是，函数的参数也属于局部变量，只能在函数内部使用。

### 全局变量

除了在函数内部定义变量，Python 还允许在所有函数的外部定义变量，这样的变量称为全局变量（Global Variable）。

和局部变量不同，全局变量的默认作用域是整个程序，即全局变量既可以在各个函数的外部使用，也可以在各函数内部使用。

定义全局变量的方式有以下 2 种：

* 在函数体外定义的变量，一定是全局变量
* 在函数体内定义全局变量。即使用 `global` 关键字对变量进行修饰后，该变量就会变为全局变量。

{% hint style="warning" %}
注意，在使用 global 关键字修饰变量名时，不能直接给变量赋初值，否则会引发语法错误。
{% endhint %}

### nonlocal

[`nonlocal`](https://docs.python.org/zh-cn/3/reference/simple\_stmts.html#nonlocal) 语句会使得相应的名称指向之前在最近包含函数作用域中绑定的变量。 如果指定名称不存在于任何包含函数作用域中则将在编译时引发 [`SyntaxError`](https://docs.python.org/zh-cn/3/library/exceptions.html#SyntaxError)。

```python
def myfunc1():
  x = "Bill"
  def myfunc2():
    nonlocal x
    x = "hello"
  myfunc2() 
  return x

print(myfunc1())
```

## 单下划线变量`_`

下划线`_`在[Python](http://www.javaxxz.com/thread-368216-1-1.html)中被视为“ **我不在乎** ”或“ **抛出** ”变量

* **python解释器将最后一个表达式值存储到名为`_`的特殊变量中。**

```python
>>> 114514
114514
>>> _
114514
```

* **划线`_`也用于忽略特定值。** **如果不需要特定值或不使用这些值，只需将这些值分配给下划线即可。**

```python
x, _, y = (1, 2, 3) 
>>> x 
1 
>>> y 
3
```

```python
for _ in range(10): do_something()
```

## 可变对象 & 不可变对象

可变对象可以在其 id() 保持固定的情况下改变其取值。

不可变对象则正相反，是具有固定值的对象，包括数字、字符串和元组。这样的对象不能被改变。如果必须存储一个不同的值，则必须创建新的对象。它们在需要常量哈希值的地方起着重要作用，例如作为字典中的键。

## 可哈希 & 不可哈希

一个对象的哈希值如果在其生命周期内**绝不改变**，就被称为可哈希 （它需要具有 **hash**() 方法），并可以同其他对象进行比较（它需要具有 **eq**() 方法）。

可哈希对象必须具有相同的哈希值比较结果才会相同。一个对象的哈希值在生命周期内不改变，就称为可哈希。

可哈希性使得对象能够作为字典键或集合成员使用，因为这些数据结构要在内部使用哈希值。 可变容器（例如列表或字典）都不可哈希。只有可哈希对象才能作为字典的键。

## 数字

不同类型的数混合运算时会将整数转换为浮点数。

### **整数**

布尔(bool)是整型的子类型。Python3 整型是没有限制大小的，可以当作 Long 类型使用。

可以在数字前加前缀`0x`表示16进制数，`0o`表示8进制数。

Python3.6允许在数字中间以`_`分隔，因此，写成`10_000_000_000`和`10000000000`是完全一样的。十六进制数也可以写成`0xa1b2_c3d4`。

### **浮点数**

可以使用科学计数法表示，如

$$
3×10^8
$$

可以写作`3e8`。

指数必须为整数，基数可以是整数。

0.4可以写作.4，4.0可以写作4.

### **复数**

由实数部分和虚数部分构成，可以用`a + bj`,或者`complex(a,b)`表示， 复数的实部a和虚部b都是浮点型。

## 布尔值

一个布尔值只有`True`、`False`两种值。可以使用逻辑运算符。经常用在条件判断中。

## 空值

空值是Python里一个特殊的值，用`None`表示。

空值作为判断条件时，视为`False`。

## 数字类型转换

* **int(x)** 将x转换为一个整数。
* **float(x)** 将x转换到一个浮点数。
* **complex(x)** 将x转换到一个复数，实数部分为 x，虚数部分为 0。
* **complex(x, y)** 将 x 和 y 转换到一个复数，实数部分为 x，虚数部分为 y。x 和 y 是数字表达式。

## 数学常量

```python
>>> import math
>>> math.pi
3.141592653589793
>>> math.exp(1)
2.718281828459045
```

## 联合类型——_union_

联合对象包含了在多个 [类型对象](https://docs.python.org/zh-cn/3/library/stdtypes.html?highlight=%E8%81%94%E5%90%88#bltin-type-objects) 上执行 `|` (按位或) 运算后的值。 这些类型主要用于 [类型标注](https://docs.python.org/zh-cn/3/glossary.html#term-annotation)。与 [`typing.Union`](https://docs.python.org/zh-cn/3/library/typing.html#typing.Union) 相比，联合类型表达式可以实现更简洁的类型提示语法。

```python
def square(number: int | float) -> int | float:
    return number ** 2
```

